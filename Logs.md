# Logs for Version v1.2.6+393 at 12:42 on 10/23/2025
[12:40:43] EDIT: Loading tour stops from /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d
[12:40:43] EDIT: Tour directory exists: true
[12:40:43] EDIT: Directory contains 11 files
[12:40:43] EDIT: File: /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d/audio_1.mp3
[12:40:43] EDIT: File: /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d/audio_1.txt
[12:40:43] EDIT: File: /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d/audio_2.mp3
[12:40:43] EDIT: File: /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d/audio_2.txt
[12:40:43] EDIT: File: /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d/audio_3.mp3
[12:40:43] EDIT: Parsing HTML content (5874 chars)
[12:40:43] EDIT: Detected NEW style tour (audio_X.mp3)
[12:40:43] EDIT: Found stops: [1, 2, 3, 4]
[12:40:43] EDIT: Created 4 stops
[12:40:43] EDIT: Loaded 4 stops
[12:40:43] CALL_STACK: _hasAnyChanges called from:
[12:40:43] CALL_STACK: 0: #0      _EditTourScreenState._hasAnyChanges (package:audio_tour_app_dev/screens/edit_tour_screen.dart:210)
[12:40:43] CALL_STACK: 1: #1      _EditTourScreenState.build (package:audio_tour_app_dev/screens/edit_tour_screen.dart:911)
[12:40:43] CALL_STACK: 2: #2      StatefulElement.build (package:flutter/src/widgets/framework.dart:5743)
[12:40:43] CALL_STACK: 3: #3      ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5631)
[12:40:43] CALL_STACK: 4: #4      StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5794)
[12:40:43] SAVE_MESSAGE: the message object contains 0 messages
[12:40:43] CRITICAL_CHANGES: _hasAnyChanges checking 4 stops
[12:40:43] CRITICAL_CHANGES: No changes found, returning false
[12:40:43] CALL_STACK: _hasAnyChanges called from:
[12:40:43] CALL_STACK: 0: #0      _EditTourScreenState._hasAnyChanges (package:audio_tour_app_dev/screens/edit_tour_screen.dart:210)
[12:40:43] CALL_STACK: 1: #1      _EditTourScreenState.build (package:audio_tour_app_dev/screens/edit_tour_screen.dart:1042)
[12:40:43] CALL_STACK: 2: #2      StatefulElement.build (package:flutter/src/widgets/framework.dart:5743)
[12:40:43] CALL_STACK: 3: #3      ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5631)
[12:40:43] CALL_STACK: 4: #4      StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5794)
[12:40:43] SAVE_MESSAGE: the message object contains 0 messages
[12:40:43] CRITICAL_CHANGES: _hasAnyChanges checking 4 stops
[12:40:43] CRITICAL_CHANGES: No changes found, returning false
[12:40:43] CALL_STACK: _hasAnyChanges called from:
[12:40:43] CALL_STACK: 0: #0      _EditTourScreenState._hasAnyChanges (package:audio_tour_app_dev/screens/edit_tour_screen.dart:210)
[12:40:43] CALL_STACK: 1: #1      _EditTourScreenState.build (package:audio_tour_app_dev/screens/edit_tour_screen.dart:1043)
[12:40:43] CALL_STACK: 2: #2      StatefulElement.build (package:flutter/src/widgets/framework.dart:5743)
[12:40:43] CALL_STACK: 3: #3      ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5631)
[12:40:43] CALL_STACK: 4: #4      StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5794)
[12:40:43] SAVE_MESSAGE: the message object contains 0 messages
[12:40:43] CRITICAL_CHANGES: _hasAnyChanges checking 4 stops
[12:40:43] CRITICAL_CHANGES: No changes found, returning false
[12:40:48] EDIT_STOP: HTML5 audio services initialized
[12:40:48] HTML_AUDIO: Loaded audio player for /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d/audio_2.mp3
[12:40:48] AUDIO_LOAD: Loaded original audio: /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d/audio_2.mp3
[12:40:48] HTML_RECORDER: Initialized successfully
[12:41:06] EDIT: Marking stop 2 as modified
[12:41:06] EDIT: TTS mode - text changed: true, will generate: false, action preserved: modify
[12:41:06] CALL_STACK: _hasAnyChanges called from:
[12:41:06] CALL_STACK: 0: #0      _EditTourScreenState._hasAnyChanges (package:audio_tour_app_dev/screens/edit_tour_screen.dart:210)
[12:41:06] CALL_STACK: 1: #1      _EditTourScreenState.build (package:audio_tour_app_dev/screens/edit_tour_screen.dart:911)
[12:41:06] CALL_STACK: 2: #2      StatefulElement.build (package:flutter/src/widgets/framework.dart:5743)
[12:41:06] CALL_STACK: 3: #3      ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5631)
[12:41:06] CALL_STACK: 4: #4      StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5794)
[12:41:06] SAVE_MESSAGE: the message object contains 0 messages
[12:41:06] CRITICAL_CHANGES: _hasAnyChanges checking 4 stops
[12:41:06] CRITICAL_CHANGES: Stop 1 (2) - modified=true, action=modify, moved=null, hasChange=true
[12:41:06] CALL_STACK: _hasAnyChanges called from:
[12:41:06] CALL_STACK: 0: #0      _EditTourScreenState._hasAnyChanges (package:audio_tour_app_dev/screens/edit_tour_screen.dart:210)
[12:41:06] CALL_STACK: 1: #1      _EditTourScreenState.build (package:audio_tour_app_dev/screens/edit_tour_screen.dart:1042)
[12:41:06] CALL_STACK: 2: #2      StatefulElement.build (package:flutter/src/widgets/framework.dart:5743)
[12:41:06] CALL_STACK: 3: #3      ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5631)
[12:41:06] CALL_STACK: 4: #4      StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5794)
[12:41:06] SAVE_MESSAGE: the message object contains 0 messages
[12:41:06] CRITICAL_CHANGES: _hasAnyChanges checking 4 stops
[12:41:06] CRITICAL_CHANGES: Stop 1 (2) - modified=true, action=modify, moved=null, hasChange=true
[12:41:06] CALL_STACK: _hasAnyChanges called from:
[12:41:06] CALL_STACK: 0: #0      _EditTourScreenState._hasAnyChanges (package:audio_tour_app_dev/screens/edit_tour_screen.dart:210)
[12:41:06] CALL_STACK: 1: #1      _EditTourScreenState.build (package:audio_tour_app_dev/screens/edit_tour_screen.dart:1043)
[12:41:06] CALL_STACK: 2: #2      StatefulElement.build (package:flutter/src/widgets/framework.dart:5743)
[12:41:06] CALL_STACK: 3: #3      ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5631)
[12:41:06] CALL_STACK: 4: #4      StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5794)
[12:41:06] SAVE_MESSAGE: the message object contains 0 messages
[12:41:06] CRITICAL_CHANGES: _hasAnyChanges checking 4 stops
[12:41:06] CRITICAL_CHANGES: Stop 1 (2) - modified=true, action=modify, moved=null, hasChange=true
[12:41:09] _saveAllChanges BEFORE save: Stop 0 - number=1, modified=false, action=null, moved=null
[12:41:09] _saveAllChanges BEFORE save: Stop 1 - number=2, modified=true, action=modify, moved=null
[12:41:09] _saveAllChanges BEFORE save: Stop 2 - number=3, modified=false, action=null, moved=null
[12:41:09] _saveAllChanges BEFORE save: Stop 3 - number=4, modified=false, action=null, moved=null
[12:41:09] CRITICAL_SAVE: Remaining stops after delete filter: 4
[12:41:09] CALL_STACK: _hasAnyChanges called from:
[12:41:09] CALL_STACK: 0: #0      _EditTourScreenState._hasAnyChanges (package:audio_tour_app_dev/screens/edit_tour_screen.dart:210)
[12:41:09] CALL_STACK: 1: #1      _EditTourScreenState._saveAllChanges (package:audio_tour_app_dev/screens/edit_tour_screen.dart:289)
[12:41:09] CALL_STACK: 2: <asynchronous suspension>
[12:41:09] CALL_STACK: 3: #2      _EditTourScreenState.build.<anonymous closure> (package:audio_tour_app_dev/screens/edit_tour_screen.dart:1042)
[12:41:09] CALL_STACK: 4: <asynchronous suspension>
[12:41:09] SAVE_MESSAGE: the message object contains 2 messages
[12:41:09] SAVE_MESSAGE: _saveAllChanges method started
[12:41:09] SAVE_MESSAGE: Processing 4 stops
[12:41:09] CRITICAL_CHANGES: _hasAnyChanges checking 4 stops
[12:41:09] CALLER_MESSAGE: Called from _saveAllChanges - testing message passing
[12:41:09] CRITICAL_CHANGES: Stop 1 (2) - modified=true, action=modify, moved=null, hasChange=true
[12:41:09] _saveAllChanges: _hasAnyChanges() returned: true
[12:41:09] EDIT: Using edit tour ID: a75a5313-7cf7-490f-aa0c-5f5a0614e97d
[12:41:09] CRITICAL_TOUR_ID: sending to backend=a75a5313-7cf7-490f-aa0c-5f5a0614e97d
[12:41:09] CRITICAL_SAVE: Modified stops filter found: 1 stops
[12:41:09] CRITICAL_SAVE: Modified stop 0 - number=2, modified=true, action=modify
[12:41:09] EDIT: Sending only 1 modified stops - backend preserves others
[12:41:09] EDIT: Preparing 1 stops for backend
[12:41:09] CRITICAL_JSON: {"stops":[{"stop_number":2,"title":"Stop 2","text":"Testing 1: reading info about Audioura application","original_text":"Testing 1_ reading info about Audioura application","audio_file":"audio_2.mp3","editable":true,"modified":true,"generate_audio_from_text":false,"action":"modify","has_custom_audio":false,"audio_source":"tts_generated"}]}
[12:41:09] CLEANUP: Original tour path stored: /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d
[12:41:09] SERVICE_DIRECT: updateMultipleStops method called with tourId: a75a5313-7cf7-490f-aa0c-5f5a0614e97d
[12:41:09] SERVICE_DIRECT: ===== TourEditingService.updateMultipleStops CALLED =====
[12:41:09] EDIT API: Tour ID: a75a5313-7cf7-490f-aa0c-5f5a0614e97d
[12:41:09] EDIT API: Received 1 stops to process
[12:41:09] EDIT API: Stop 0 - Number: 2, Action: modify, Modified: true
[12:41:09] EDIT API: Stop 0 - Has custom audio: false, Audio path: null
[12:41:09] EDIT API: Stop 2 - TTS mode, generate: false
[12:41:09] EDIT API: ===== MAKING HTTP POST REQUEST =====
[12:41:09] EDIT API: URL: http://192.168.0.217:5022/tour/a75a5313-7cf7-490f-aa0c-5f5a0614e97d/update-multiple-stops
[12:41:09] EDIT API: Payload stops count: 1
[12:41:10] EDIT API: ===== HTTP RESPONSE RECEIVED =====
[12:41:10] EDIT API: Response status: 200
[12:41:10] EDIT API: Response body: {"download_url":"/tour/b0e086a0-dea3-468a-9890-d3feb10ce674/download","message":"Tour updated successfully with 1 text-to-speech audio file(s)","new_tour_id":"b0e086a0-dea3-468a-9890-d3feb10ce674","status":"success","stops":[{"audio_source":"tts_generated","audio_updated":false,"generate_audio_from_text":false,"has_custom_audio":false,"stop_number":2,"text_updated":true}]}

[12:41:10] EDIT API: Save success - Tour updated successfully with 1 text-to-speech audio file(s)
[12:41:10] API_CALL: TourEditingService.updateMultipleStops returned successfully
[12:41:10] API_CALL: Response keys: [download_url, message, new_tour_id, status, stops]
[12:41:10] EDIT: Save response: {download_url: /tour/b0e086a0-dea3-468a-9890-d3feb10ce674/download, message: Tour updated successfully with 1 text-to-speech audio file(s), new_tour_id: b0e086a0-dea3-468a-9890-d3feb10ce674, status: success, stops: [{audio_source: tts_generated, audio_updated: false, generate_audio_from_text: false, has_custom_audio: false, stop_number: 2, text_updated: true}]}
[12:41:10] CRITICAL_TOUR_ID: Backend returned new_tour_id=b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:10] TOUR_ID_FIX: Updated widget.tourData tour_id to: b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:10] TOUR_ID_FIX: Updated tour path from /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d to /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:10] TOUR_ID_FIX: Replaced old ID a75a5313-7cf7-490f-aa0c-5f5a0614e97d with new ID b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:10] EDIT: Starting new tour download process
[12:41:10] EDIT: REQ-016 new tour created: b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:10] EDIT: Download paths - old: /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0, new: /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:10] EDIT: Created new tour directory: /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:10] EDIT API: Downloading updated tour b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:11] EDIT API: Downloaded 2015646 bytes
[12:41:11] EDIT API: Extracted 11 files
[12:41:11] EDIT API: Tour download and extraction completed
[12:41:11] DEBUG_UPDATE_ID: Starting _updateLocalTourId with newTourId: b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:11] DEBUG_UPDATE_ID: Looking for tour to update
[12:41:11] DEBUG_UPDATE_ID: Original path: /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d
[12:41:11] DEBUG_UPDATE_ID: New path: /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:11] DEBUG_UPDATE_ID: Found matching tour at index 4
[12:41:11] DEBUG_UPDATE_ID: Old path: /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d
[12:41:11] DEBUG_UPDATE_ID: Updated path to: /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:11] DEBUG_UPDATE_ID: Updated tour_id to: b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:11] DEBUG_UPDATE_ID: SharedPreferences updated
[12:41:11] CLEANUP: Targeted cleanup - old: /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d, new: /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:11] CLEANUP: Deleted specific old tour: /data/user/0/com.audiotours.dev/app_flutter/tours/a75a5313-7cf7-490f-aa0c-5f5a0614e97d
[12:41:11] EDIT: Tour path updated to: /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:11] EDIT: Loading tour stops from /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674
[12:41:11] EDIT: Tour directory exists: true
[12:41:11] EDIT: Directory contains 11 files
[12:41:11] EDIT: File: /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674/audio_1.mp3
[12:41:11] EDIT: File: /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674/audio_1.txt
[12:41:11] EDIT: File: /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674/audio_2.mp3
[12:41:11] EDIT: File: /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674/audio_2.txt
[12:41:11] EDIT: File: /data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674/audio_3.mp3
[12:41:11] EDIT: Parsing HTML content (5874 chars)
[12:41:11] EDIT: Detected NEW style tour (audio_X.mp3)
[12:41:11] EDIT: Found stops: [1, 2, 3, 4]
[12:41:11] EDIT: Created 4 stops
[12:41:11] EDIT: Loaded 4 stops
[12:41:11] DEBUG_RESET: Processing 4 stops
[12:41:11] CALL_STACK: _hasAnyChanges called from:
[12:41:11] CALL_STACK: 0: #0      _EditTourScreenState._hasAnyChanges (package:audio_tour_app_dev/screens/edit_tour_screen.dart:210)
[12:41:11] CALL_STACK: 1: #1      _EditTourScreenState.build (package:audio_tour_app_dev/screens/edit_tour_screen.dart:911)
[12:41:11] CALL_STACK: 2: #2      StatefulElement.build (package:flutter/src/widgets/framework.dart:5743)
[12:41:11] CALL_STACK: 3: #3      ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5631)
[12:41:11] CALL_STACK: 4: #4      StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5794)
[12:41:11] SAVE_MESSAGE: the message object contains 0 messages
[12:41:11] CRITICAL_CHANGES: _hasAnyChanges checking 4 stops
[12:41:11] CRITICAL_CHANGES: No changes found, returning false
[12:41:11] CALL_STACK: _hasAnyChanges called from:
[12:41:11] CALL_STACK: 0: #0      _EditTourScreenState._hasAnyChanges (package:audio_tour_app_dev/screens/edit_tour_screen.dart:210)
[12:41:11] CALL_STACK: 1: #1      _EditTourScreenState.build (package:audio_tour_app_dev/screens/edit_tour_screen.dart:1042)
[12:41:11] CALL_STACK: 2: #2      StatefulElement.build (package:flutter/src/widgets/framework.dart:5743)
[12:41:11] CALL_STACK: 3: #3      ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5631)
[12:41:11] CALL_STACK: 4: #4      StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5794)
[12:41:11] SAVE_MESSAGE: the message object contains 0 messages
[12:41:11] CRITICAL_CHANGES: _hasAnyChanges checking 4 stops
[12:41:11] CRITICAL_CHANGES: No changes found, returning false
[12:41:11] CALL_STACK: _hasAnyChanges called from:
[12:41:11] CALL_STACK: 0: #0      _EditTourScreenState._hasAnyChanges (package:audio_tour_app_dev/screens/edit_tour_screen.dart:210)
[12:41:11] CALL_STACK: 1: #1      _EditTourScreenState.build (package:audio_tour_app_dev/screens/edit_tour_screen.dart:1043)
[12:41:11] CALL_STACK: 2: #2      StatefulElement.build (package:flutter/src/widgets/framework.dart:5743)
[12:41:11] CALL_STACK: 3: #3      ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5631)
[12:41:11] CALL_STACK: 4: #4      StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5794)
[12:41:11] SAVE_MESSAGE: the message object contains 0 messages
[12:41:11] CRITICAL_CHANGES: _hasAnyChanges checking 4 stops
[12:41:11] CRITICAL_CHANGES: No changes found, returning false
[12:41:15] VOICE: InAppWebView created, controller set
[12:41:15] VOICE: WebView loaded: file:///data/user/0/com.audiotours.dev/app_flutter/tours/b0e086a0-dea3-468a-9890-d3feb10ce674/index.html
[12:41:15] VOICE: Getting tour info
[12:41:49] Checking user: USER-281301397
[12:41:49] Testing connectivity to: 192.168.0.217
[12:41:49] ✅ Server connectivity: OK
